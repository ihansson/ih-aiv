window.aiv=function(t){var e={};function s(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e){const s={prefix:"aiv",cls:{in_view:"in-view",out_of_view:"out-of-view"},throttle:50,last_call:!1,nodes:!1,init:function(t){if(this.nodes=t.querySelectorAll("["+this.prefix+"]"),this.nodes)return this.scroll=this.scroll.bind(this),this.resize=this.resize.bind(this),this.add_view_classes=this.add_view_classes.bind(this),this.add_initial_classes(),window.addEventListener("scroll",this.scroll),window.addEventListener("resize",this.resize),window.setTimeout((function(){let t=document.createEvent("Event");t.initEvent("scroll",!1,!0),0==window.pageXOffset&&window.dispatchEvent(t)}),60),this},destroy:function(){this.nodes=!1,this.last_call=!1,window.removeEventListener("scroll",this.scroll),window.removeEventListener("resize",this.resize),window.removeEventListener("load",this.add_view_classes)},scroll:function(){this.add_view_classes()},resize:function(){this.add_view_classes()},add_initial_classes:function(){this.nodes.forEach(function(t){t._className||(t._className=""),t.attributes[this.prefix+"-start_visible"]||(t.attributes[this.prefix+"-children"]?(t.aiv_children=t.querySelectorAll(t.attributes[this.prefix+"-children"].nodeValue),t.aiv_children.forEach(function(t){t._className="",this.add_class(t,this.cls.out_of_view),this.commit_class_changes(t)}.bind(this))):(this.add_class(t,this.cls.out_of_view),this.commit_class_changes(t)))}.bind(this))},add_view_classes:function(){const t=Date.now();if(this.last_call&&t-this.last_call<this.throttle)return;this.last_call=t;const e=this.get_visible_area();this.nodes.forEach(function(t){if("in-view"==t.status&&!t.attributes[this.prefix+"-repeat"])return;const s=this.in_view(t,e);s&&"in-view"!==t.status?(t.status="in-view",this.remove_class(t,this.cls.out_of_view),this.add_class(t,this.cls.in_view),t.attributes[this.prefix+"-cls"]&&this.add_class(t,t.attributes[this.prefix+"-cls"].nodeValue),t.attributes[this.prefix+"-out_cls"]&&this.remove_class(t,t.attributes[this.prefix+"-out_cls"].nodeValue),t.attributes[this.prefix+"-delay"]&&!t.timeout?t.attributes[this.prefix+"-children"]?t.aiv_children.forEach(function(e,s){e._className=t._className,e.timeout=window.setTimeout(function(){this.commit_class_changes(e)}.bind(this),parseFloat(t.attributes[this.prefix+"-delay"].nodeValue)*s)}.bind(this)):t.timeout=window.setTimeout(function(){this.commit_class_changes(t)}.bind(this),parseFloat(t.attributes[this.prefix+"-delay"].nodeValue)):t.attributes[this.prefix+"-children"]?t.aiv_children.forEach(function(e){e._className=t._className,this.commit_class_changes(e)}.bind(this)):this.commit_class_changes(t)):s||"out-of-view"===t.status||(t.status="out-of-view",this.has_class(t,this.cls.in_view)&&t.attributes[this.prefix+"-out_cls"]&&this.add_class(t,t.attributes[this.prefix+"-out_cls"].nodeValue),this.remove_class(t,this.cls.in_view),this.add_class(t,this.cls.out_of_view),t.attributes[this.prefix+"-cls"]&&this.remove_class(t,t.attributes[this.prefix+"-cls"].nodeValue),t.attributes[this.prefix+"-children"]?t.aiv_children.forEach(function(e,s){e._className=t._className,e.timeout&&(window.clearTimeout(e.timeout),e.timeout=!1),this.commit_class_changes(e)}.bind(this)):(t.timeout&&(window.clearTimeout(t.timeout),t.timeout=!1),this.commit_class_changes(t)))}.bind(this))},has_class:function(t,e){return!!t._className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},add_class:function(t,e){return this.has_class(t,e)||(t._className=(t._className+" "+e).trim()),t},remove_class:function(t,e){return this.has_class(t,e)&&(t._className=t._className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").trim()),t},commit_class_changes:function(t){t._className!==t.className&&(t.className=t._className,t._className=t.className)},in_view:function(t,e){let s=t.offsetTop+t.offsetHeight,i=t.offsetTop;return t.attributes[this.prefix+"-offset"]&&(s+=parseFloat(t.attributes[this.prefix+"-offset"].nodeValue),i+=parseFloat(t.attributes[this.prefix+"-offset"].nodeValue)),s>e.top&&i<e.bottom},get_visible_area:function(){return{top:window.pageYOffset,bottom:window.pageYOffset+window.innerHeight}}};NodeList.prototype.forEach||(NodeList.prototype.forEach=function(t,e){for(var s=0,i=this.length;s<i;++s)t.call(e||this,this[s],s,this)}),t.exports=Object.create(s).init(document.querySelector("body"))}]);
//# sourceMappingURL=aiv.min.js.map