window.aiv=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e){let n=[],o=!1,a={},r={};const l=["aiv/load","aiv/before_load","aiv/remove","aiv/in_view","aiv/out_of_view","aiv/class_change"];for(ev in l){let t=document.createEvent("Event");t.initEvent(l[ev],!0,!0),r[l[ev]]=t}function c(t){for(opt in t)a[opt]=t[opt]}function v(t,e){let o=a.context.querySelectorAll(t);for(i in o=Array.prototype.slice.call(o))s(o[i],e);n=n.concat(o)}function u(t){t.dispatchEvent(r["aiv/remove"]),t.aiv.timeout&&window.clearTimeout(t.aiv.timeout),n=n.filter((function(e){return e!==t}))}function s(t,e){if(t.aiv={delay:0,delay_all:0,offset:0,in_view:[0,1]},t.attributes.aiv){let e=t.attributes.aiv?function(t){let e={};return t?(t.split(";").forEach((function(t){let i=t.trim().split(":");if(!i[0])return;let n=i[0].trim(),o=!i[1]||i[1].trim();-1!==["delay","offset","delay_all"].indexOf(n)&&(o=parseInt(o)),-1!==["in_view"].indexOf(n)&&(o=o.split(",").map((function(t){return parseFloat(t)}))),e[n]=!i[1]||o})),e):e}(t.attributes.aiv.nodeValue):{};for(setting in e)t.aiv[setting]=e[setting]}if(e)for(opt in e)t.aiv[opt]=e[opt];t.aiv.children&&(t.aiv.children=Array.prototype.slice.call(t.querySelectorAll(t.aiv.children))),t.dispatchEvent(r["aiv/before_load"]);const i=t.aiv.children?t.aiv.children:[t];let n=[t.aiv.cls?t.aiv.cls:a.in_cls],o=[t.aiv.out_cls?t.aiv.out_cls:a.out_cls];for(index in i){let e=i[index];e.aiv||(e.aiv={}),e.aiv.in_cls=n.slice(),e.aiv.out_cls=o.slice(),e.aiv.in_cls.push(e.className),e.aiv.out_cls.push(e.className),t.aiv.start_visible||p(e,e.aiv.out_cls),e.dispatchEvent(r["aiv/load"])}}function f(){const t=Date.now();if(o&&t-o<a.throttle)return;o=t;const e=function(){let t=parseInt(window.pageYOffset),e=parseInt(window.innerHeight);return{top:t,bottom:t+e,height:e}}();let r=n;for(i in r)d(r[i],e)}function d(t,e){const i=function(t,e){let i=e.bottom+t.aiv.in_view[1]*e.height-e.height,n=e.top+t.aiv.in_view[0]*e.height;return t.offsetTop+t.aiv.offset<=i&&t.offsetTop+t.offsetHeight+t.aiv.offset>=n}(t,e),n=t.aiv.children?t.aiv.children:[t];for(index in n){let e=n[index];if(i&&"in"!==e.aiv_status&&(e.dispatchEvent(r["aiv/in_view"]),e.aiv_status="in",t.aiv.triggered=!0,t.aiv.delay?e.aiv.timeout=window.setTimeout((function(){p(e,e.aiv.in_cls)}),t.aiv.delay*(t.aiv.children?index:index+1)+t.aiv.delay_all):p(e,e.aiv.in_cls)),!i&&"out"!==e.aiv_status){if(e.dispatchEvent(r["aiv/out_of_view"]),e.aiv.timeout&&(window.clearTimeout(e.aiv.timeout),e.aiv.timeout=!1),t.aiv.triggered&&!t.aiv.repeat){u(t);continue}e.aiv_status="out",p(e,e.aiv.out_cls)}}}function p(t,e){t.dispatchEvent(r["aiv/class_change"]),t.className=e.join(" ")}function _(){window.addEventListener("scroll",f),window.addEventListener("resize",f),window.setTimeout((function(){let t=document.createEvent("Event");t.initEvent("scroll",!1,!0),0==window.pageXOffset&&window.dispatchEvent(t)}),60)}t.exports={add:v,remove:u,bind:_,unbind:function(){window.removeEventListener("scroll",f),window.removeEventListener("resize",f)},init:function(t){c({in_cls:"in-view",out_cls:"out-of-view",throttle:50,context:document.body,selector:"[aiv]"}),t&&c(t),a.context&&v("[aiv]"),_()}}}]);
//# sourceMappingURL=aiv.min.js.map